
# Traffic Prediction in SDN Networks

## Overview

This project aims to analyze traffic patterns and predict traffic within Software-Defined Networking (SDN) environments. This involves capturing network traffic using either RYU or tcpdump, followed by training machine learning models to forecast traffic. The performance analysis includes running traffic flows for 30 seconds or more, with 80% of the data used for training and 20% for testing the ML algorithm. As part of the exploration, we will examine the efficacy of Prophet by Meta as a potential tool for this task. This project aims to provide insights into traffic prediction methodologies and their applicability in SDN networks.

## Objectives
•	To implement a  random topology using mininet and Ryu controller   

•	To generate the dataset

•	To capture the traffic through the network

•	To apply a Machine learning algorithm to predict the future traffic in an SDN network

## Implementation Flow
To achieve our goal we implemented a series of steps that are outlined in the diagram below:

![Implementation Flow](_readme_images/implementation_flow.png)

We start by initializing a network in mininet, this will be done in a deterministic but arbitrary way based on input parameter as will be desrcribed later.

The network is then started and traffic is generated by using IPERF with various different timings between random hosts.

While this is happening the traffic is captured by the system using Scapy network sniffers.

After this the data is preprocessed in order to calculate the avergage bandwidth over a set timestamp.

With this data we can fit a predition model, which in our case is ARIMA, and from that predict the future traffic.
As this is a test the training data is split 80/20 where 80% is used for training and the rest as validation.

## Getting Started
Clone the repository
```bash
git clone https://github.com/MattiaDeMunari/SDN-Traffic-Prediction
```

## Requirements
Mininet and Ryu can be installed in a virtual machine following the instructions on [prof. Fabrizio Granelli's website](https://www.granelli-lab.org/researches/relevant-projects/comnetsemu-labs). The application require Python 3.

Install Python3 dependencies using pip:
```bash
sudo pip3 install -r requirements.txt
```
## Usage
### Topology and traffic generation
This repository contains the following structure: 

SDN-Traffic-Prediction
```
├── utils
├── training_data (_auto-generated_) : saved arima training data
├── plots (_auto-generated_) : saved images prediction plots
├── captures (_auto-generated_) : saved traffic data captures
├── main.py
├── traffic_prediction.py
```

Build and start the topology with Mininet and generate traffic.
```bash
sudo python3 main.py [--switches SWITCHES] [--hosts HOSTS] [--cross-connection CROSS_CONNECTION] [--base-flows FLOWS] [--flows FLOWS][--time TIME]
```

The script allows users to define custom network topologies by specifying the number of switches, hosts per switch, and interconnectivity between switches. These parameters can be adjusted according to the desired testing scenario.

N.B.: Mininet requires this script to be ran as root, therefore sudo is mandatory

Arguments:
- `--switches`: Number of switches in the network. Default is 7.
- `--hosts`: Number of hosts per switch. Default is 2.
- `--cross-connection`: Interconnectivity ratio between switches. Default is 0.30.
- `--time`: Duration of the test in seconds. Default is 30.
- `--flows`: Number of periodic iperf flows running on each host. Default is 2.
- `--base-flows`: Number of continuous iperf flows running on the newtork. Default is 3.


Example of command that will run the script with 10 switches, 3 hosts per switch, 50% cross-connection, and a test duration of 60 seconds.
```bash
sudo python3 main.py --switches 10 --hosts 3 --cross-connection 0.50 --time 60 --base-flows 5 --flows 3

```
Application flow:
1. Network creation: building of the specified network topology using Mininet.
2. STP configuration: waiting for Spanning Tree Protocol (STP) configuration to avoid network loops.
3. Ping connectivity test: ping connectivity test between all hosts in the network to verify basic network connectivity.
4. Traffic generation: starting servers on some hosts and clients on others. 
5. Traffic capture: capture of network traffic passing through the switches using scapy for analysis.

### Traffic prediction
The script created in order to predict network traffic patterns accepts various command-line arguments for flexibility in data input and output customization.

Start traffic prediction process:  
```bash
python3 traffic_prediction.py [--csv CSV] [--store-plot STORE_PLOT] [--training-split TRAINING_SPLIT] [--sample-period SAMPLE_PERIOD]
```

Arguments:
- `--csv`: Path to the folder containing the training data, the fodler should contain a folder for each swich, which in turn contains a *.csv* file for each interface.
- `--store-plot`: Path to the folder where the plots will be stored. Default is "plots".
- `--training-split`: Percentage of data used for training. Default is 80%.
- `--sample-period`: Period over which to combine network data in pandas date-time format. Default is "0.2S"

To run the script with custom parameters:
```bash
python3 traffic_prediction.py --csv captures --store-plot my_plots --training-split 0.75 --sample-period "0.1S"
```

# Contributions
 - AIberto Gusmeroli
 - Mattia De Munari
 - Pietro Lechthaler


# Acknowledgements 
 - ARIMA
 - [comnetsemu](https://git.comnets.net/public-repo/comnetsemu)